# ~/.tmuxinator/phoji.yml

name: phoji
root: ~/Sites/phoji
startup_window: editor
pre_window: rvm use 2.2.2
windows:
  - editor:
    - vim
  - terminal: #empty
  - console:
      - cd phoji-application
      - rails c
  - log:
      - tail -f phoji-application/log/development.log
  - frontend:
      pre: nvm use v0.10.32
      layout: tiled
      panes:
        - grunt:
          - cd phoji-application
          - grunt
          - grunt watch
  - servers:
      layout: tiled
      panes:
        - postgres: postgres -D /usr/local/var/postgres/
        - redis: redis-server
        - rails:
          - cd phoji-application
          - bundle install
          - bundle exec rake db:migrate
          - bundle exec rake db:seed
          - bundle exec foreman start
  - ssh:
      layout: tiled
      panes:
        - staging: ssh ssmith@qa.phojiapp.com
        - production: ssh ssmith@broadcaster.phojiapp.com
  - test:
    - cd phoji-application
    - bundle exec guard

